{"version":3,"file":"event-receiver.js","sourceRoot":"","sources":["../../../src/event-bridge/event-receiver.ts"],"names":[],"mappings":";;AAGA;IACE,gCAAoB,MAA0B;QAA1B,WAAM,GAAN,MAAM,CAAoB;IAAG,CAAC;IAElD,wCAAO,GAAP,UAAQ,QAAsB,EAAE,KAAY;QAA5C,iBAgBC;QAfC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,0CAAmC,KAAK,CAAC,UAAU,CAAE,CAAC,CAAC;QAC7F,IAAI,CAAC,MAAM;aACR,KAAK,CAAC;YACL,UAAU,EAAE,KAAK,CAAC,UAAU;YAC5B,gBAAgB,EAAE,KAAK,CAAC,gBAAgB;YACxC,eAAe,EAAE,KAAK,CAAC,eAAe;YACtC,MAAM,EAAE,KAAK,CAAC,MAAM;YACpB,gBAAgB,EAAE,KAAK,CAAC,gBAAgB;SACzC,CAAC;YACF,gFAAgF;aAC/E,KAAK;QACJ,0BAA0B,CAAC,UAAC,KAAK;YAC/B,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACjD,CAAC,CACF,CAAC;IACN,CAAC;IACH,6BAAC;AAAD,CAAC,AApBD,IAoBC;AApBY,wDAAsB","sourcesContent":["import { Config, CoreClient, Event, EventBridgeReceiver } from '@amplitude/analytics-types';\nimport { EventChannel } from './event-channel';\n\nexport class AnalyticsEventReceiver implements EventBridgeReceiver {\n  constructor(private client: CoreClient<Config>) {}\n\n  receive(_channel: EventChannel, event: Event) {\n    this.client.config.loggerProvider.log(`Receive event from event bridge ${event.event_type}`);\n    this.client\n      .track({\n        event_type: event.event_type,\n        event_properties: event.event_properties,\n        user_properties: event.user_properties,\n        groups: event.groups,\n        group_properties: event.group_properties,\n      })\n      // Due to non-awaitable async interface, code is unreachable in test environment\n      .catch(\n        /* istanbul ignore next */ (error) => {\n          this.client.config.loggerProvider.error(error);\n        },\n      );\n  }\n}\n"]}